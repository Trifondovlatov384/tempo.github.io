(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{4820:(e,t,s)=>{"use strict";s.d(t,{ChessPageContent:()=>g});var l=s(5155),a=s(2115),r=s(63),n=s(6059);let i=[{id:"full",label:"100% оплата",discountPercent:0,description:"Полная оплата без рассрочки"}],o=["ст","1","2","3","4+"];function d(e){var t,s,d,c;let{buildings:m,currentBuildingIndex:u,filters:x,onFiltersChange:h}=e,f=(0,r.useRouter)(),b=(0,r.useSearchParams)(),[p,g]=(0,a.useState)(!1),v=m[u],w=x.rooms.length>0||null!==x.priceFrom||null!==x.priceTo||null!==x.areaFrom||null!==x.areaTo||x.windowView.length>0;return(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white/80 via-white/70 to-white/60 backdrop-blur-xl border-b border-white/20 rounded-b-xl",children:[(0,l.jsx)("div",{className:"px-6 py-4 border-b border-white/20 flex items-center justify-between",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{onClick:()=>g(!p),className:"flex items-center gap-2 text-sm font-semibold text-[#2a515f] hover:text-[#b69a76] transition-colors",children:[(0,l.jsxs)("span",{children:["Шахматки – ",(null==v?void 0:v.name)||"Корпус ".concat(u+1)]}),(0,l.jsx)(n.A,{className:"w-4 h-4 transition-transform ".concat(p?"rotate-180":"")})]}),p&&(0,l.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-gradient-to-br from-white/90 via-white/80 to-white/70 backdrop-blur-xl rounded-lg shadow-lg border border-white/30 py-1 z-50 min-w-[150px]",children:m.map((e,t)=>(0,l.jsx)("button",{onClick:()=>(e=>{let t=new URLSearchParams(b.toString());t.set("building",String(e+1)),f.push("/tempo_nova/chess?".concat(t.toString())),g(!1)})(t),className:"w-full text-left px-4 py-2 text-sm hover:bg-white/30 transition-colors text-[#2a515f] ".concat(t===u?"bg-white/40 font-medium":""),children:e.name||"Корпус ".concat(t+1)},e.id))})]})}),(0,l.jsxs)("div",{className:"px-6 py-4 flex flex-wrap items-center gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-[#2a515f]",children:"Комнаты"}),(0,l.jsx)("div",{className:"flex gap-2",children:o.map(e=>(0,l.jsx)("button",{onClick:()=>(e=>{let t=x.rooms.includes(e)?x.rooms.filter(t=>t!==e):[...x.rooms,e];h({...x,rooms:t})})(e),className:"px-3 py-1.5 text-sm rounded-lg transition-all font-medium ".concat(x.rooms.includes(e)?"bg-[#b69a76] text-white shadow-md":"bg-white/40 text-[#2a515f] hover:bg-white/60"),children:e},e))})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-[#2a515f]",children:"Цена, млн"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"от",value:null!=(t=x.priceFrom)?t:"",onChange:e=>h({...x,priceFrom:e.target.value?Number(e.target.value):null}),className:"w-20 px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] placeholder-[#2a515f]/40 transition-all"}),(0,l.jsx)("span",{className:"text-[#2a515f]/50",children:"-"}),(0,l.jsx)("input",{type:"number",placeholder:"до",value:null!=(s=x.priceTo)?s:"",onChange:e=>h({...x,priceTo:e.target.value?Number(e.target.value):null}),className:"w-20 px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] placeholder-[#2a515f]/40 transition-all"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-[#2a515f]",children:"Площадь м\xb2"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"от",value:null!=(d=x.areaFrom)?d:"",onChange:e=>h({...x,areaFrom:e.target.value?Number(e.target.value):null}),className:"w-16 px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] placeholder-[#2a515f]/40 transition-all"}),(0,l.jsx)("span",{className:"text-[#2a515f]/50",children:"-"}),(0,l.jsx)("input",{type:"number",placeholder:"до",value:null!=(c=x.areaTo)?c:"",onChange:e=>h({...x,areaTo:e.target.value?Number(e.target.value):null}),className:"w-16 px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] placeholder-[#2a515f]/40 transition-all"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-[#2a515f]",children:"Вид"}),(0,l.jsxs)("select",{multiple:!0,value:x.windowView,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value);h({...x,windowView:t})},className:"px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] transition-all",children:[(0,l.jsx)("option",{value:"Вид во двор",children:"Вид во двор"}),(0,l.jsx)("option",{value:"Вид на море",children:"Вид на море"}),(0,l.jsx)("option",{value:"Вид на улицу",children:"Вид на улицу"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-[#2a515f]",children:"Условия"}),(0,l.jsx)("select",{value:x.installmentId,onChange:e=>h({...x,installmentId:e.target.value}),className:"px-3 py-1.5 text-sm bg-white/40 border border-white/30 rounded-lg focus:outline-none focus:border-[#b69a76] focus:bg-white/60 text-[#2a515f] transition-all",children:i.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.label,e.discountPercent>0&&" (-".concat(e.discountPercent,"%)")]},e.id))})]}),w&&(0,l.jsx)("button",{onClick:()=>{h({rooms:[],priceFrom:null,priceTo:null,areaFrom:null,areaTo:null,windowView:[],installmentId:"full"})},className:"px-3 py-1.5 text-sm text-red-500 hover:text-red-700 transition-colors font-medium",children:"Сброс"})]}),(0,l.jsxs)("div",{className:"px-6 py-3 flex flex-wrap items-center gap-6 border-t border-white/20 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-3 h-3 rounded bg-white border-2 border-[#b69a76]"}),(0,l.jsx)("span",{className:"text-[#2a515f]/70",children:"Свободно"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-3 h-3 rounded bg-[#f4d181]"}),(0,l.jsx)("span",{className:"text-[#2a515f]/70",children:"Платная бронь"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-3 h-3 rounded bg-[#a0a0a0]"}),(0,l.jsx)("span",{className:"text-[#2a515f]/70",children:"Продано / ДДУ"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-3 h-3 rounded bg-[#d0d0d0]"}),(0,l.jsx)("span",{className:"text-[#2a515f]/70",children:"Не для продажи"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded bg-white border-2 border-red-400 flex items-center justify-center",children:(0,l.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"})}),(0,l.jsx)("span",{className:"text-[#2a515f]/70",children:"Спец. предложение"})]})]})]})}let c=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))});function m(e){let{units:t,discountPercent:s,onUnitClick:r}=e,n=(0,a.useMemo)(()=>{let e=new Map;for(let s of t){let t=s.section||"Без секции",l=s.floor||0;e.has(t)||e.set(t,new Map);let a=e.get(t);a.has(l)||a.set(l,[]),a.get(l).push(s)}return Array.from(e.entries()).map(e=>{let[t,s]=e;return{section:t,floors:Array.from(s.entries()).sort((e,t)=>t[0]-e[0]).map(e=>{let[t,s]=e;return{floor:t,units:s.sort((e,t)=>(Number(e.number)||0)-(Number(t.number)||0))}})}})},[t]);if(0===t.length)return(0,l.jsx)("div",{className:"flex items-center justify-center h-96 text-[#2a515f]/50",children:"Нет квартир, соответствующих фильтрам"});let i=(e,t)=>{if(!e)return"—";let s=Math.round(e*(1-t/100));return"".concat((s/1e6).toFixed(2),"M")};return(0,l.jsx)("div",{className:"space-y-8 pb-8",children:n.map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#2a515f] mb-4 px-6",children:e.section}),e.floors.map(t=>(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-[#2a515f]/60 mb-3 px-6",children:[t.floor," этаж"]}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 px-6",children:t.units.map(e=>{var t;return(0,l.jsx)("button",{onClick:()=>r(e),className:"relative group focus:outline-none",children:(0,l.jsxs)("div",{style:{backgroundColor:(e=>{var t;let s=(null==(t=e.status)?void 0:t.toUpperCase())||"";return s.includes("AVAILABLE")?"#ffffff":s.includes("SOLD")||s.includes("DDU")?"#a0a0a0":s.includes("PAID_RESERVATION")?"#f4d181":s.includes("CLOSED")?"#d0d0d0":"#ffffff"})(e),border:e.hasSpecialOffer?"2px solid #ef4444":"2px solid #b69a76"},className:"aspect-square rounded-lg p-3 hover:shadow-lg transition-all hover:scale-105 flex flex-col justify-between relative overflow-hidden",children:[e.hasSpecialOffer&&(0,l.jsx)("div",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full border border-red-600"}),(null==(t=e.status)?void 0:t.toUpperCase().includes("CLOSED"))&&(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,l.jsx)(c,{className:"w-6 h-6 text-[#2a515f]/40"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"text-lg font-bold text-[#2a515f]",children:e.number||"—"}),(0,l.jsx)("div",{className:"text-xs text-[#2a515f]/60",children:0===e.rooms?"Студия":"".concat(e.rooms,"к")})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[e.area&&(0,l.jsxs)("div",{className:"text-[#2a515f]/70",children:[e.area," м\xb2"]}),e.price&&(0,l.jsx)("div",{className:"font-semibold text-[#b69a76]",children:i(e.price,s)}),e.price&&s>0&&(0,l.jsx)("div",{className:"text-[#2a515f]/40 line-through text-xs",children:i(e.price,0)})]})]})},e.id)})})]},"".concat(e.section,"-").concat(t.floor)))]},e.section))})}let u=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});var x=s(7650),h=s(2619),f=s.n(h);function b(e){let{unit:t,discountPercent:s,complexName:r,onClose:n}=e,[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>(o(!0),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]);let d=s>0?Math.round(t.price*(1-s/100)):t.price,c=s>0&&d!==t.price;return i?(0,x.createPortal)((0,l.jsxs)("div",{className:"fixed inset-0 z-[99999] flex items-center justify-end",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:n}),(0,l.jsxs)("div",{className:"relative w-full max-w-md h-full bg-gradient-to-br from-white/80 via-white/70 to-white/60 backdrop-blur-xl shadow-2xl overflow-auto border-l border-white/20",style:{animation:"slideInRight 0.3s ease-out"},children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-gradient-to-br from-white/80 via-white/70 to-white/60 backdrop-blur-xl border-b border-white/20 px-6 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-[#2a515f]",children:["Кв. ",t.number]}),r&&(0,l.jsx)("p",{className:"text-sm text-[#2a515f]/60",children:r})]}),(0,l.jsx)("button",{onClick:n,className:"p-2 hover:bg-white/30 rounded-lg transition-colors",children:(0,l.jsx)(u,{className:"w-5 h-5 text-[#2a515f]"})})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[t.layoutImage&&(0,l.jsx)("div",{className:"rounded-lg overflow-hidden bg-white/40 border border-white/30",children:(0,l.jsx)("img",{src:t.layoutImage,alt:"Планировка ".concat(t.number),className:"w-full h-auto"})}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white/60 via-white/50 to-white/40 backdrop-blur-md rounded-lg p-5 border border-white/30",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-[#2a515f]/70 mb-2",children:"Стоимость"}),(0,l.jsxs)("div",{className:"text-3xl font-bold text-[#b69a76] mb-1",children:[Math.round(d/1e6*10)/10,"M ₽"]}),c&&(0,l.jsxs)("div",{className:"text-sm text-[#2a515f]/50 line-through",children:[Math.round(t.price/1e6*10)/10,"M ₽"]}),t.pricePerM2&&(0,l.jsxs)("div",{className:"text-sm text-[#2a515f]/70 mt-2 pt-2 border-t border-white/20",children:[Math.round(t.pricePerM2*(1-s/100))," ₽/м\xb2"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)(p,{label:"Комнаты",value:"".concat(t.rooms)}),(0,l.jsx)(p,{label:"Площадь",value:"".concat(t.area," м\xb2")}),(0,l.jsx)(p,{label:"Этаж",value:"".concat(t.floor)}),(0,l.jsx)(p,{label:"Статус",value:t.statusHumanized}),t.view&&(0,l.jsx)(p,{label:"Вид",value:t.view}),t.section&&(0,l.jsx)(p,{label:"Секция",value:t.section})]}),t.hasSpecialOffer&&t.specialOfferName&&(0,l.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 rounded p-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-red-700 mb-1",children:"\uD83C\uDF81 Спецпредложение"}),(0,l.jsx)("div",{className:"text-sm text-red-600",children:t.specialOfferName})]}),"AVAILABLE"===t.status&&(0,l.jsx)(f(),{href:"/tempo_nova/installment?unitId=".concat(t.id,"&price=").concat(d),className:"block w-full bg-gradient-to-br from-[#b69a76] to-[#a88866] text-white text-center py-3 rounded-lg font-semibold hover:from-[#a88866] hover:to-[#997656] transition-all shadow-lg hover:shadow-xl active:scale-95",children:"Посчитать рассрочку →"}),"AVAILABLE"!==t.status&&(0,l.jsx)("div",{className:"bg-white/30 text-[#2a515f] text-center py-3 rounded-lg font-medium border border-white/30",children:t.statusHumanized})]})]}),(0,l.jsx)("style",{children:"\n        @keyframes slideInRight {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      "})]}),document.body):null}function p(e){let{label:t,value:s}=e;return(0,l.jsxs)("div",{className:"bg-white/40 backdrop-blur-md rounded-lg p-3 border border-white/30 hover:bg-white/50 transition-colors",children:[(0,l.jsx)("div",{className:"text-xs font-medium text-[#2a515f]/60 mb-1",children:t}),(0,l.jsx)("div",{className:"text-sm font-semibold text-[#2a515f]",children:s})]})}function g(e){let{data:t}=e,s=Math.max(0,parseInt((0,r.useSearchParams)().get("building")||"1")-1),n=s<t.buildings.length?s:0,[o,c]=(0,a.useState)(null),[u,x]=(0,a.useState)({rooms:[],priceFrom:null,priceTo:null,areaFrom:null,areaTo:null,windowView:[],installmentId:"full"}),h=t.buildings[n],f=(0,a.useMemo)(()=>{var e;return h?(e=h.units,e.filter(e=>{if(u.rooms.length>0){var t;let s=0===(t=e.rooms)?"ст":t>=4?"4+":t.toString()||null;if(!s||!u.rooms.includes(s))return!1}return(null===u.priceFrom||null===e.price||!(e.price<1e6*u.priceFrom))&&(null===u.priceTo||null===e.price||!(e.price>1e6*u.priceTo))&&(null===u.areaFrom||null===e.area||!(e.area<u.areaFrom))&&(null===u.areaTo||null===e.area||!(e.area>u.areaTo))&&(!(u.windowView.length>0)||!!e.view&&!!u.windowView.includes(e.view))&&!0})):[]},[h,u]),p=i.find(e=>e.id===u.installmentId),g=(null==p?void 0:p.discountPercent)||0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(d,{buildings:t.buildings,currentBuildingIndex:n,filters:u,onFiltersChange:x}),(0,l.jsx)("div",{className:"overflow-y-auto",children:(0,l.jsx)(m,{units:f,discountPercent:g,onUnitClick:c})})]}),o&&(0,l.jsx)(b,{unit:o,discountPercent:g,complexName:(null==h?void 0:h.name)||null,onClose:()=>c(null)})]})}},5528:(e,t,s)=>{Promise.resolve().then(s.bind(s,4820))}},e=>{e.O(0,[34,441,255,358],()=>e(e.s=5528)),_N_E=e.O()}]);